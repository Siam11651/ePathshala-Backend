SELECT TEACHERS.USER_ID AS USER_ID, FULL_NAME, AVG(RATE) AS RATE
FROM TEACHERS
JOIN USERS
ON(USERS.USER_ID = TEACHERS.USER_ID)
JOIN COURSES
ON(TEACHERS.USER_ID = COURSES.CREATOR_ID)
JOIN CONTENTS
ON(COURSES.COURSE_ID = CONTENTS.COURSE_ID)
WHERE LOWER(FULL_NAME) LIKE LOWER(CONCAT('%', $1, '%'))
GROUP BY TEACHERS.USER_ID, FULL_NAME